<div class="page-title pl-5">
    Customers
</div>
<div class="customer-content p-3 ">
    <div class="search-container">
        <mat-form-field class="pr-3" appearance="outline">
            <mat-icon class="search-prefix-icon" matPrefix>search</mat-icon>
            <input matInput type="search" placeholder="Search keyword..." [(ngModel)]="keyword" (input)="searchKeyword($event)">
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-select disableOptionCentering placeholder="Status" [(ngModel)]="status" (selectionChange)="searchStatus($event)">
                <mat-option value="All">All</mat-option>
                <mat-option value="Installed">Installed</mat-option>
                <mat-option value="Pending">Pending</mat-option>
            </mat-select>
        </mat-form-field>

        <button mat-raised-button class="add-customer" (click)="addCustomer()">Add Customer</button>
    </div>
    <table mat-table [dataSource]="customerList" class="customer w-100">
        <ng-container matColumnDef="customerName">
            <th mat-header-cell *matHeaderCellDef> Customer Name </th>
            <td mat-cell *matCellDef="let element"> {{element.customerName}} </td>
        </ng-container>
        <ng-container matColumnDef="contactPerson">
            <th mat-header-cell *matHeaderCellDef> Contact Person </th>
            <td mat-cell *matCellDef="let element"> {{element.contactPerson}} </td>
        </ng-container>
        <ng-container matColumnDef="phoneNo">
            <th mat-header-cell *matHeaderCellDef> Mobile phone number </th>
            <td mat-cell *matCellDef="let element"> {{element.phoneNo}} </td>
        </ng-container>
        <ng-container matColumnDef="emailAddress">
            <th mat-header-cell *matHeaderCellDef> Email Address </th>
            <td mat-cell *matCellDef="let element"> {{element.emailAddress}} </td>
        </ng-container>
        <ng-container matColumnDef="noOfSites">
            <th mat-header-cell *matHeaderCellDef> No. of sites </th>
            <td mat-cell *matCellDef="let element"> {{element.noOfSites}} </td>
        </ng-container>
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell [ngClass]="[element.status === 'Installed' ? 'install' : 'pending']" *matCellDef="let element"> 
                <div class="status">{{element.status}}</div>
            </td>
        </ng-container>
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>   
            <td mat-cell *matCellDef="let element"> 
              <button class="delete" mat-raised-button (click)="deleteCustomer(element.id)">Delete</button> 
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                 showFirstLastButtons>
    </mat-paginator>
</div>